; ===========================================================================
[XCPonCAN]
; ===========================================================================

;; Execute payload hook scripts (see documentation)
;lua = <path to Lua payload hook script>
; Example: lua=c:\scripts\payload_hook.lua
; Default: none, payload hooks are disabled

;; Show all available hardware devices at startup
;list-hardware-devices =
; default: disabled

;; Use the hardware device identified by {uri} 
hardware-device={uri}
; Example: hardware-device=ETAS://ETH/ES593_D:2202370/CAN:4
; Default: unset (the VRS will not run unless this is set!)

;; Enable CAN-FD. This has to be supported by the chosen hardware!
;can-fd=
; Default: unset, attempt to use Classic CAN
;;; Optional, set CAN-FD operation mode:
;can-fd=iso
; Default: iso, use "pre-standard" to select legacy operation mode

;; Switch the log level of the standard output from "Info" to
;; "TraceData" (see below). THIS HAS SEVERE PERFORMANCE REPERCUSSIONS,
;; use only when absolutely necessary. 
;; Overrides a possibly present `--quiet` option at both the command-line
;; and the initialization file.
;verbose =
; Default: unset, only messages of level "Info" or higher are logged
;          to the standard output

;; Switch the log level of the standard output from "Info" to "Warning"
;quiet =
; Default: unset, messages of level "Info" or higher are logged to the
;          standard output

;; Enable a report output (log level INFO) every ARG seconds. 
;report-interval = 5
; Default: unset, no report will be shown

;; Show the (raw, intended for debugging) capabilities of the selected
;; hardware / BOA device
;show-hardware-device-capabilities=
; Default: unset, do not show

; ------------------------------------------------------------------------
[Logging]
; ------------------------------------------------------------------------

;; Log file storage location
;Directory = C:\Temp
; Default: read ETAS log directory from the registry, fall back to the
;          local user application data directory.

;; The applicable log level for the log file, available with ascending
;; noisiness: Error, Warning, Info, ConfigInfo, TraceFunction, TraceData
;Level = Info
; Default: Info

;; How many (old, previous) logfiles to keep around?
;Keep = 5
; Default: 5

; ------------------------------------------------------------------------
[ECU]
; workarounds for issues, behavioral changes
; ------------------------------------------------------------------------

;ClockSkewFactorPercent = 0
; default: 0

;StartOnWorkingPage = yes
; default: yes, if set to "no" the initial page is the Reference Page

;AllowUnlimitedVirtualMemoryRead = no
; default: no, if set XCP-slave (ECU independent) memory reads are virtually
; unlimited in size (e.g. the response to GET_ID).

;AreEcuIdType1To4Valid = yes
; default: yes, if unset GET_ID types 1 to 4 are treated as "unsupported".

;EcuIdentifierFixedLength = 0
; default: 0, if set to any other value this is the length reported for
; identifiers transmitted with GET_ID

;IgnoreEcuAccessType = yes
; default: yes, if set to "no" the VRS will check if the configured
; access of a particular page (see the example below) is allowed
; from an ECU point-of-view in combination with the XCP access mode.

;KeepResumeFlag = no
; default: no, if set to "yes", the RESUME flag at DAQ lists is _not_
; reset when the ECU power is switched from OFF to ON.

;EnableClockCompensation = yes
; default: yes, if set to "no", internally detected scheduling delays will
; will not be "made up". This is sometimes useful when it must be ensured
; that no task will ever be activated after less than its configured period,
; e.g. when doing Bypass.

;TimestampResetOnPowerUp = yes
; default: yes, if set to "no", the timestamps reported by the VRS will not
; be reset to zero on start up.

;TrackComplementaryBypassDaqLists = no
; default: no, if set to "yes", associations between DAQ lists with
; directions DAQ and STIM are tracked, and the DAQ lists with
; direction DAQ are only sent if the associated DAQ list with
; direction STIM has been completely received. (The use case for this
; functionality is to avoid transmission of stale bypass data due to
; the STIM data not having been made available from the BOA in time
; through no fault of the ES910. A late transmission of the ES910 is
; detected through other means, see the "XCP Bypass" chapter in the
; user manual for details.)

;UseWrongTimesyncTimestampUnitFormat = no
; default: no, if set to "yes", the previous and wrong timestamp unit format
; (lower nibble) will be used within the CLOCK_INFO fields made available for
; upload after a TIME_CORRELATION_PROPERTIES command. (Note that support for
; the legacy format will be phased out in INCA 7.2.15. INCA 7.2.14 after Beta
; 60 supports both, older INCA versions only support the wrong format.)

[ECU.BypassDelayThresholds]

;IssueReportThresholdBus = 90
;; default: 90 (percent of the Event Channel period).
;; This sets the threshold for the allowed response delay from the XCP
;; Master before an issue is detected and the "BypassIssueCounterBus"
;; measurement signal is incremented.
;; Only applicable if "TrackComplementaryBypassDaqLists" is enabled
;; above. This is determined based on the actual CAN bus message time
;; difference and compared to the given percentage of the DAQ List's
;; associated Event Channel (in STIM direction) period.

;WarningReportThresholdBus = 75
;; default: 75 (percent of the Event Channel period).
;; This sets the threshold for the allowed response delay from the XCP
;; Master before a warning message is emitted.
;; Only applicable if "TrackComplementaryBypassDaqLists" is enabled
;; above. This is determined based on the actual CAN bus message time
;; difference and compared to the given percentage of the DAQ List's
;; associated Event Channel (in STIM direction) period.

;WarningReportThresholdECU = 90
;; default: 90 (percent of the Event Channel period).
;; This sets the threshold for the allowed reaction delay of the ECU
;; before the "BypassIssueCounterEcu" measurement signal is
;; incremented (this is not a Bypass Issue but could indicate a
;; bottleneck in the VRS). A warning is emitted in this case, too.
;; Only applicable if "TrackComplementaryBypassDaqLists" is enabled
;; above. This is determined based on the actual CAN bus message time
;; difference and compared to the given percentage of the DAQ List's
;; associated Event Channel (in STIM direction) period.

;InformationReportThresholdECU = 75
;; default: 75 (percent of the Event Channel period).
;; This sets the threshold for the allowed reaction delay of the ECU
;; before the "BypassIssueCounterEcu" measurement signal is
;; incremented (this is not a Bypass Issue but could indicate a
;; bottleneck in the VRS). A warning is emitted in this case, too.
;; default: 5 (milliseconds), this sets the threshold for the allowed
;; reaction delay of the ECU before an informational message is
;; emitted. Only applicable if "TrackComplementaryBypassDaqLists" is
;; enabled above.

; ---------------------------------------------------------------------------
[PROTOCOL_LAYER]
; ---------------------------------------------------------------------------

;PROTOCOL_LAYER_VERSION = 0x0105
; default: 0x0104 (XCP 1.4)

;MAX_DTO_STIM = 1234
; default: same as MAX_DTO, depends on Transport Layer

; ---------------------------------------------------------------------------
[XCP_ON_CAN]
; ---------------------------------------------------------------------------

;TRANSPORT_LAYER_VERSION = 0x0105
; default: 0x0104 (XCP on UDP_IP or TCP_IP 1.4)

;CAN_ID_MASTER=0x04F8
; default: 0x04F8, if given: use as default for STIM as well
;CAN_ID_SLAVE=0x0326
; default: 0x0326, if given: use as default for DAQ as well
;BAUDRATE=1000000
; default: 1000000
;SAMPLE_POINT=80
; default: 80
;SAMPLE_RATE = SINGLE
; possible values: SINGLE (default), TRIPLE
;BTL_CYCLES=10
; default: 10
;SJW=2
; default: 2
;SYNC_EDGE=SINGLE
; possible values: SINGLE (default), DUAL

; ---------------------------------------------------------------------------
[CAN_FD]
; ---------------------------------------------------------------------------

;CAN_FD_DATA_TRANSFER_BAUDRATE=2000000
; default: 2000000
;SAMPLE_POINT=80
; default: 80
;BTL_CYCLES=20
; default: 20
;SJW=4
; default: 4
;TRANSCEIVER_DELAY_COMPENSATION=ON
; possible values: ON (default), OFF
;SECONDARY_SAMPLE_POINT=80
; default: 80

; SYNC_EDGE is missing since there's no support for that in the CAN-FD 
; context within the VRS hardware access library

; +==========================================================================
; |
; | M E M O R Y   S E G M E N T   C O N F I G U R A T I O N
; |
; +==========================================================================

; ------------------------------------------------------------------------
;[MEMORY_SEGMENT.6.PAGE.0]
;                ^ Segment logical number in A2L
;                       ^ Page numer in A2L
; ------------------------------------------------------------------------

;ECU_ACCESS_TYPE = ECU_ACCESS_WITH_XCP_ONLY
; default: ECU_ACCESS_WITH_XCP_ONLY

;XCP_READ_ACCESS_TYPE = XCP_READ_ACCESS_WITH_ECU_ONLY
; default: XCP_READ_ACCESS_WITH_ECU_ONLY

;XCP_WRITE_ACCESS_TYPE = XCP_WRITE_ACCESS_NOT_ALLOWED
; default: XCP_WRITE_ACCESS_NOT_ALLOWED

; ------------------------------------------------------------------------
;[MEMORY_SEGMENT.6.PAGE.1]
;                ^ Segment logical number in A2L
;                       ^ Page numer in A2L
; ------------------------------------------------------------------------

;ECU_ACCESS_TYPE = ECU_ACCESS_WITH_XCP_ONLY
; default: ECU_ACCESS_WITH_XCP_ONLY

;XCP_READ_ACCESS_TYPE = XCP_READ_ACCESS_WITH_ECU_ONLY
; default: XCP_READ_ACCESS_WITH_ECU_ONLY

;XCP_WRITE_ACCESS_TYPE = XCP_WRITE_ACCESS_WITH_ECU_ONLY
; default: XCP_WRITE_ACCESS_WITH_ECU_ONLY

; +==========================================================================
; |
; | X C P   E V E N T   C H A N N E L   C O N F I G U R A T I O N
; |
; +==========================================================================

; ---------------------------------------------------------------------------
; [XCP_EVENT_CHANNEL_0]
;                    ^ Event channel number
; ------------------------------------------------------------------------

; No new Event Channels can be created, existing Event Channels cannot
; be removed!

; For the default configuration, please refer to `XCPonCAN15.a2l`.

;; ***************************************************************************
;; ** Basic properties
;; ***************************************************************************

;; The event channel's name can be re-set
;Name = XCP_EV0_10ms_DAQ
    
;; What kind of DAQ list can be allocated to this event
;; channel?
; Direction = DAQ
;; possible values: DAQ
;;                  STIM
;;                  DAQ_STIM

;; What measurement consistency is supported at this event channel?
; Consistency = EVENT
;; possible values: ODT
;;                  DAQ
;;                  EVENT
;;                  NONE

;; The maximum number of DAQ lists that can be allocated to this
;; Event Channel.
;MaxDaqList 	= 240
;; possible values: a number between 0 and 255

;; The period of this Event Channel in "TimeUnit" ticks.
;TimeCycle = 10
;; possible values: a number between 0 and 255
    
;; The (XCP timestamp) unit of this Event Channel
;TimeUnit = 6
;; possible values: a number between 0 and 12 (see the XCP specification)

;; Set the priority of this Event Channel. Note that this is not used
;; internally to "schedule" the actions associated with this Event
;; Channel, but is reported through the "GET_DAQ_EVENT_INFO" command
;; response.
;Priority = 0
;; possible values: a number between 0 and 255

;; ***************************************************************************
;; ** Packed Mode support
;; ***************************************************************************
        
;; Enable or disable the support for Packed Mode at this channel
;PackedModeEnabled = no
;; possible values: yes, no
    
;; Sets the "packing mode" of this event channel.
;PackedModeGroupingType = ELEMENT
;; possible values: ELEMENT
;;                  EVENT
    
;; When are timestamps sampled in Packed Mode?
;PackedModeTimestamp = FIRST
;; possible values: FIRST
;;                  LAST
    
;; Is the use of Packed Mode for DAQ lists at this Event Channal required?
;PackedModeUsage = OPTIONAL
;; possible values: OPTIONAL
;;                  MANDATORY
    
;; How many sample "iterations" can be packed into one packet?
;PackedModeSampleCount 	= 5
;; possible values: 1 up to 255


;; ***************************************************************************
;; ** Bypass Consistency support
;; ***************************************************************************

;; The related Event Channel number of this Event Channel
;RELATED_EVENT_CHANNEL_NUMBER = NOT_PRESENT
;; possible values: NOT_PRESENT
;;                  A valid event channel number

;; What's the reported DTO_CTR_PROPERTIES' DTO_CTR DAQ_MODE?
;DTO_CTR_DAQ_MODE = INSERT_COUNTER
;; possible values: NOT_PRESENT
;;                  INSERT_COUNTER
;;                  INSERT_STIM_COUNTER_COPY

;; What's the reported DTO_CTR_PROPERTIES' DTO_CTR STIM_MODE?
;DTO_CTR_STIM_MODE = DO_NOT_CHECK_COUNTER
;; possible values: NOT_PRESENT
;;                  DO_NOT_CHECK_COUNTER
;;                  CHECK_COUNTER
    
;; Is a free-running counter present at this Event Channel?
;EVENT_COUNTER_PRESENT = no
;; possible values: no
;;                  yes

;; Is a copy of the latest STIM counter present at this Event Channel?
;STIM_DTO_CTR_COPY_PRESENT = no
;; possible values: no
;;                  yes
    
;; Is the Event Channel number fixed and cannot be changed by the XCP
;; Master?
;RELATED_EVENT_CHANNEL_NUMBER_FIXED = no
;; possible values: no
;;                  yes

;; Is the STIM mode fixed and cannot be changed by the XCP Master?
;DTO_CTR_STIM_MODE_FIXED = no
;; possible values: no
;;                  yes

;; Is the DAQ mode fixed and cannot be changed by the XCP Master?
;DTO_CTR_DAQ_MODE_FIXED = no
;; possible values: no
;;                  yes

; ---------------------------------------------------------------------------
[DAQ_LIST_CAN_ID]
; ---------------------------------------------------------------------------
;
; These only apply when using static DAQ configuration
;
; * This requires slave and master id to be given as well
; 
; DAQ list number = CAN ID
;0=0x327 ; DAQ / Event 0
;1=0x326 ; DAQ / Event 1 (implicit)
;2=0x329 ; DAQ / Event 2
;3=0x326 ; DAQ / Event 5 (explicit)
;4=0x2F0 ; STIM / Event 3
;5=0x2F1 : STIM / Event 4
;6=0x4F8 ; STIM / Event 2 (implicit)
;7=0x4F8 ; STIM / Event 5 (implicit)

; ---------------------------------------------------------------------------
[EVENT_CAN_ID_LIST]
; ---------------------------------------------------------------------------
;
; These only apply when using dynamic DAQ configuration
;
; * These do only apply for direction DAQ
; * If this section is not present at all the defaults for static DAQs (see 
;   above) are used for dynamic DAQs, too.
; * If this section is present, all events (that are to be used) must be
;   configured
; * Assignment to invididual DAQs is effectively random (in case multiple
;	identifiers for one direction are given)
;
; Event number = ((DAQ|STIM):can-identifier)+
;4=DAQ:0x2f1
;0=DAQ:0x327
;5=DAQ:0x326,STIM:0x4f8
;1=DAQ:0x326
;3=DAQ:0x2f0
;2=DAQ:0x329,STIM:0x4f8
